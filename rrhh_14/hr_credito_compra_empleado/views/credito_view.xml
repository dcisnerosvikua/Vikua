<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<record id="vista_from_credito" model="ir.ui.view">
		<field name="name">vista.from.credito</field>
		<field name="model">hr.credito</field>
		<field name="arch" type="xml">
			<form string="Asignaciones de creditos al Empleado">
				<header>
                		<field name="status_credito" widget="statusbar" statusbar_visible="hold,pending,solvent" readonly="True"/>

                		<button name="aprobar" string="Aprobar credito" type="object" attrs="{'invisible': [('status_credito', '!=','hold')]}"/>
                		<button name="cancel" string="Cancelar" type="object" attrs="{'invisible': [('status_credito', '=','hold')]}"/>
                		<!-- attrs="{'invisible': [('manual', '=',False)]}"-->
                </header>
                <sheet>
                <group name="Campos ref">
				    <group>						
				        <field name="empleado_id" required='1'></field>	
				        <field name="cedula" invisible="1"></field>
						<field name="monto_credito" string="Monto del credito" required='1'></field>
						<field name="cuotas"></field>
						<field name="adeudado" string="Monto a pagar"></field>
						
				    </group>
				    <group>
				    	<field name="credito_fecha" required='1'></field>
				    	<field name="porcentaje"></field>
				    	<field name="forma_pago" string="Como se va a pagar el PrÃ©stamo?" required='1'></field>
				    	<field name="monto_cuotas"></field> <!-- readonly="True" -->
				    </group>
				</group>

				<notebook>

        		<page string="Calendarios de Pagos">
            		<field name="credito_line_ids" nolabel="1" readonly="True">
                    	<tree string="Registro de Pagos" editable="buttom">
                    		<field name="num_cuota" string="Cuota nro"/>
	                        <field name="fecha_pago" string="Fecha del Pago"/>
	                        <field name="monto_pagado" string="Monto"/>
	                        <field name="status_pago" string="Status"/>
                    	</tree>
            		</field>
        		</page>
    			</notebook>
    			<newline/>

                </sheet>		
			</form>
		</field>
	</record>

	<record id="vista_tree_credito" model="ir.ui.view">
		<field name="name">vista.tree.credito</field>
		<field name="model">hr.credito</field>
		<field name="arch" type="xml">
			<tree string="Asignaciones de creditos al Empleado" >
				<field name="empleado_id"></field>
				<field name="cedula"></field>	
				<field name="monto_credito" string="Monto del credito" sum="monto_credito"></field>
				<field name="porcentaje" string="% de Interes"></field>
				<field name="adeudado" string="Monto a Pagar" sum="adeudado"></field>
				<field name="cuotas"></field>	
				<field name="status_credito" string="Status" readonly="True"></field>		
			</tree>
		</field>
	</record>


    <!--field name="retention_line_ids" nolabel="1" readonly="True"-->

	<record id="hr_solicitud_credito_menu" model="ir.actions.act_window">
		<field name="name">Registro de solicitud de creditos</field>
		<field name="res_model">hr.credito</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="vista_tree_credito"></field>
	</record>

	<menuitem
		id="menu_solicitud_credito"
		name="Registrar Creditos de compra empleado" 
		parent="hr_payroll.menu_hr_payroll_payslips"
		action="hr_solicitud_credito_menu"
		sequence="91"/>
</odoo>
